#### `2020-12-10 (ëª©)`

<br/>

# ğŸ’» 1

## ğŸ“‚1-1 ReviewForm

<br/>

> src > pages > ReviewForm.js

<br/>

### âš¡ 1-1-1

- Q ) ë‚˜ì¤‘ì— serverì— ì „ì†¡í•˜ê¸° ìœ„í•´ File URL ì•„ë‹Œ file ìì²´ ì €ì¥ í›„ UI ê·¸ë¦´ ë•Œ URL ì¶”ì¶œ?
- A ) Reviews state ë‚´ì— imgFiles, imageFilesURL ë‘ê°œì˜ ë³„ë„ í•­ëª© ìƒì„±
```js
const onImageUpload = (e) => {
  let files = e.target.files;
  if (files.length > 5) {
    alert('ìµœëŒ€ 5ì¥ê¹Œì§€ ì„ íƒí•´ì£¼ì„¸ìš” : )');
    return;
  }
  let fileURLs = [];
  let file;
  let filesLength = files.length > 5 ? 5 : files.length;
  for (let i = 0; i < filesLength; i++) {
    file = files[i];

    let reader = new FileReader();
    reader.onload = () => {
      fileURLs[i] = reader.result;
      setReview({
        ...review,
        imgFiles: [...files],
        imgFileURLs: [...fileURLs],
      });
    };
    reader.readAsDataURL(file);
  }
};
```

<br/>

> src > components > form > StarRating.js

<br/>

### âš¡ 1-1-2

- Q ) StarRating êµ¬í˜„
- A )
  1. layerXë¡œ í˜„ì¬ layerë¥¼ ê¸°ì¤€ìœ¼ë¡œ  mouseOver eventê°€ ì¼ì–´ë‚œ ê³³ì˜ í˜„ì¬ Xì¢Œí‘œë¥¼ êµ¬í•˜ì—¬ í˜„ì¬ ì¢Œí‘œë¥¼ í†µí•´ rateë¥¼ ì‚°ì¶œí•œë‹¤.
  2. overflowëŠ” hiddenì‹œí‚¤ê³ , ì‚°ì¶œí•œ rateì™€ ë³„ í•˜ë‚˜ì˜ ë„“ì´ë¥¼ ê³±í•œ ê°’ì„ ratedStarsì˜ widthë¡œ ì„¤ì •í•œë‹¤.
  3. width, svgë¥¼ ë³€ìˆ˜ë¡œ ì„¤ì •í•˜ì—¬ ì¶”ìƒí™”í•œë‹¤.
```js
import React, { useState, useEffect } from 'react';
import styled from 'styled-components';
import { svg } from '../../config/config';

const ratedTextMap = {
  0.0: 'í‰ê°€í•˜ê¸°',
  0.5: 'ìµœì•…ì´ì—ìš”',
  1.0: 'ì‹¤ë§ì´ì—ìš”',
  1.5: 'ë§›ì—†ì–´ìš”',
  2.0: 'ë³„ë¡œì—ìš”',
  2.5: 'ê·¸ëƒ¥ê·¸ë˜ìš”',
  3.0: 'í‰ë²”í•´ìš”',
  3.5: 'ê´œì°®ì•„ìš”',
  4.0: 'ë§›ìˆì–´ìš”',
  4.5: 'í›Œë¥­í•´ìš”!',
  5.0: 'ìµœê³ ì—ìš”!',
};

const StarRating = ({ name, onReviewChange }) => {
  const [fetchedRate, setFetchedRate] = useState(0.0);
  const [rate, setRate] = useState(0);
  const starsWidth = 150;
  const oneStarWidth = starsWidth / 5;

  useEffect(() => {
    setRate(fetchedRate);
  }, [fetchedRate]);

  const handleMouseMove = (e) => {
    setRate((Math.floor((e.nativeEvent.layerX / oneStarWidth) * 2) + 1) / 2);
  };

  const handleMouseLeave = () => {
    setRate(fetchedRate || 0);
  };

  const handleClick = (e) => {
    setFetchedRate(rate);
    onReviewChange(e);
  };

  const Star = ({ isRated }) => {
    return <li className={`${isRated ? 'starRated' : 'star'}`} name={name} value={rate}></li>;
  };

  return (
    <Wrap className="wrap" rate={rate} starsW={starsWidth} oneStarW={oneStarWidth} svg={svg}>
      <h3>ë³„ì </h3>
      <div className="innerWrap">
        <ul className="stars" onMouseMove={handleMouseMove} onMouseLeave={handleMouseLeave} onClick={handleClick}>
          {[...new Array(5)].map((_, index) => (
            <Star key={index} />
          ))}
          <ul className="ratedStars">
            {[...new Array(5)].map((_, index) => (
              <Star key={index} isRated={true} />
            ))}
          </ul>
        </ul>
        <span className="text">{ratedTextMap[fetchedRate]}</span>
      </div>
    </Wrap>
  );
};

export default React.memo(StarRating);

const Wrap = styled.div`
  .innerWrap {
    position: relative;
  }
  .stars {
    width: ${(props) => props.starsW}px;
    cursor: pointer;
  }
  .ratedStars {
    position: absolute;
    top: 0;
    left: 0;
    width: ${(props) => (props.rate ? props.rate * props.oneStarW + 'px' : '0')};
    overflow: hidden;
    white-space: nowrap;
  }
  .text {
    position: absolute;
    top: 6px;
    left: 162px;
    color: ${(props) => props.theme.gray[1]};
    font-size: 14px;
  }

  .star {
    display: inline-block;
    background: ${(props) => `url(${props.svg.star})`} center center / contain no-repeat;
    vertical-align: top;
    width: ${(props) => props.oneStarW}px;
    height: ${(props) => props.oneStarW}px;
  }

  .starRated {
    display: inline-block;
    background: ${(props) => `url(${props.svg.ratedStar})`} center center / contain no-repeat;
    vertical-align: top;
    width: ${(props) => props.oneStarW}px;
    height: ${(props) => props.oneStarW}px;
  }
`;
```

### âš¡ 1-1-3

- Q ) StarRating ë°”ë€ê°’ì´ review stateì— ì €ì¥ì´ ì•ˆëœë‹¤..? event ì˜ ë„˜ê²¨ë°›ê³  ìˆê³ , name, valueë„ ì„¤ì •í•´ìˆëŠ”ë° ì™œ..?
- A )

# ğŸ’» 2

## ğŸ“‚2-1 RecentKeyword

<br/>

> src > components > search > RecentKeyword.js

<br/>

### âš¡ 2-1-1

- Q ) ìµœê·¼ ê²€ìƒ‰ì–´ ëª©ë¡ì´ ëœ¨ì§€ ì•ŠìŒ
- A ) e.target.classList.contains ì—¬ë¶€ë¡œ show stateë¥¼ ê´€ë¦¬í–ˆì—ˆëŠ”ë°, styled-componentì—ì„œ ì„ì˜ë¡œ ë¶€ì—¬í•œ classëª…ì´ ë°”ë€Œì—ˆê¸° ë•Œë¬¸ì— ì´ì „ì˜ classNameê³¼ ë” ì´ìƒ ì¼ì¹˜í•˜ì§€ ì•Šê²Œ ë˜ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ì²˜ìŒ ì½”ë“œë¥¼ ì§¤ ë•Œë„ ì¡°ê¸ˆ ë¶ˆì•ˆí•˜ë‹¤ ì‹¶ì—ˆëŠ”ë°, ë¬¸ì œë¥¼ ì¼ì° ë°œê²¬í•˜ì—¬ ë‹¤í–‰ì´ë‹¤! data-showì— 'show'ë¥¼ ë¶€ì—¬í•˜ê³ , e.target.dataset.show === 'show'ì¼ ë•Œë§Œ show stateê°€ trueê°€ ë˜ë„ë¡ ë³€ê²½í•˜ì˜€ë‹¤.

<br/>

> src > components > search > search

<br/>

Search.js
```js
const handleShowRecentKeywords = (e) => {
  setShow(() => (e.target.dataset.show === 'show' ? true : false));
};
```

<br/>

> src > components > search > SearchForm.js

<br/>

SearchForm.js
```js
return (
  <Wrap>
    <SearchInput
      placeholder="ê·¼ì²˜ì˜ ì±„ì‹ ì‹ë‹¹ì„ ì°¾ì•„ë³´ì„¸ìš”!"
      value={value}
      data-show="show"
      onChange={handleInputChange}></SearchInput>
    <SearchButton type="submit" data-show="show" onClick={handleInputClick}>
      ê²€ìƒ‰
    </SearchButton>
  </Wrap>
);
```