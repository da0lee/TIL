#### `2020-12-10 (ëª©)`

<br/>

# ðŸ’» 1

## ðŸ“‚1-1 UploadImg

<br/>

> src > components > form > UploadImg.js

<br/>

### âš¡ 1-1-1

- Q ) fileì €ìž¥, url ì¶”ì¶œ ë¡œì§ ê°„ì†Œí™”
- A ) 
  - file urlì„ ì €ìž¥í•  ë–„, new FileReader() ì •ì˜ í›„ fileURLs[i] = reader.resultë¥¼ í•˜ëŠ” ëŒ€ì‹  URL.createObjectURL(file); ì‚¬ìš©. ì½”ë“œê°€ í›¨ì”¬ ê°„ê²°í•´ì¡Œë‹¤.
  - forë¬¸ ì•ˆì—ì„œ setStateë¥¼ í•˜ë©´ stateê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ rerenderingì´ ë˜ë¯€ë¡œ ë°˜ë³µë¬¸ ë°–ìœ¼ë¡œ ë¹¼ë‚´ì—ˆë‹¤.

#### ASIS
```js
const ReviewForm = () => {
  const [review, setReview] = useState(initReview);
  const [activedBtn, setActivedBtn] = useState('');
  const { imgFiles, imgFileURLs, title, contents } = review;
  const onImageUpload = (e) => {
    let files = e.target.files;
    if (files.length > 5) {
      alert('ìµœëŒ€ 5ìž¥ê¹Œì§€ ì„ íƒí•´ì£¼ì„¸ìš” : )');
      return;
    }
    let fileURLs = [];
    let file;
    let filesLength = files.length > 5 ? 5 : files.length;
    for (let i = 0; i < filesLength; i++) {
      file = files[i];

      let reader = new FileReader();
      reader.onload = () => {
        fileURLs[i] = reader.result;
        setReview({
          ...review,
          imgFiles: [...files],
          imgFileURLs: [...fileURLs],
        });
      };
      reader.readAsDataURL(file);
    }
  };

  const onVegLevelClick = (nextActivedBtn) => {
    setActivedBtn(nextActivedBtn);
  };

  const onReviewChange = (e) => {
    const { name, value } = e.target;
    setReview({
      ...review,
      imgFileURLs,
      [name]: value,
    });
  };

  const handleSubmit = (e) => {
    console.log(review);
    e.preventDefault();
    setActivedBtn('');
    setReview(initReview);
  };

  return (
    <Wrap bg={BgImg}>
      <h2>í”¼ë“œ ì“°ê¸°</h2>
      <form>
        <Category review={review} onReviewChange={onReviewChange} />
        <UploadImg name="imgFiles" value={imgFiles} imgFileURLs={imgFileURLs} onImageUpload={onImageUpload} />
        <VegLevel activedBtn={activedBtn} onReviewChange={onReviewChange} onVegLevelClick={onVegLevelClick} />
        <Input label="ì œëª©" name="title" value={title} placeholder="ì œëª©ì„ ìž…ë ¥í•˜ì„¸ìš”." onChange={onReviewChange} />
        <Textarea name="contents" value={contents} placeholder="ë‚´ìš©ì„ ìž…ë ¥í•˜ì„¸ìš”." onChange={onReviewChange} />
        <SubmitBtn value="í”¼ë“œ ì“°ê¸°" onClick={handleSubmit} />
      </form>
    </Wrap>
  );
};
```

<br/>

#### TOBE

```js
const onImageUpload = (e) => {
    let files = e.target.files;
    if (files.length > 5) {
      alert('ìµœëŒ€ 5ìž¥ê¹Œì§€ ì„ íƒí•´ì£¼ì„¸ìš” : )');
      return;
    }
    let file;
    let fileURLs = [];
    let fileList = [];
    let filesLength = files.length > 5 ? 5 : files.length;
    for (let i = 0; i < filesLength; i++) {
      file = files[i];
      fileURLs[i] = URL.createObjectURL(file);
      fileList[i] = files[i];
    }

    setReview({
      ...review,
      imgFiles: [...fileList],
      imgFileURLs: [...fileURLs],
    });
  };

  const onVegLevelClick = (nextActivedBtn) => {
    setActivedBtn(nextActivedBtn);
  };

  const onReviewChange = (e) => {
    const { name, value } = e.target;
    setReview({
      ...review,
      [name]: value,
    });
  };

  const handleSubmit = (e) => {
    console.log(review);
    e.preventDefault();
    setActivedBtn('');
    setReview(initReview);
  };

  return (
    <Wrap bg={BgImg}>
      <h2>í”¼ë“œ ì“°ê¸°</h2>
      <form>
        <Category name="category" review={review} onReviewChange={onReviewChange} />
        <UploadImg name="imgFiles" value={imgFiles} imgFileURLs={imgFileURLs} onImageUpload={onImageUpload} />
        <VegLevel activedBtn={activedBtn} onReviewChange={onReviewChange} onVegLevelClick={onVegLevelClick} />
        <StarRating name="starRating" onReviewChange={onReviewChange} />
        <Input
          label="ì œëª©"
          name="title"
          value={title}
          placeholder="ì œëª©ì„ ìž…ë ¥í•˜ì„¸ìš”."
          onReviewChange={onReviewChange}
        />
        <Textarea name="contents" placeholder="ë‚´ìš©ì„ ìž…ë ¥í•˜ì„¸ìš”." onReviewChange={onReviewChange} />
        <SubmitBtn value="í”¼ë“œ ì“°ê¸°" onSubmit={handleSubmit} />
      </form>
    </Wrap>
  );
};
```